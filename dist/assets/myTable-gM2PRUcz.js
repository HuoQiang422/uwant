import{r as t,u as p,j as c,e as z,af as E,l as P}from"./index--DjN_GCZ.js";import{a as v}from"./confirm-rrV5STMe.js";function M(S){const{columns:m,url:y,tableKey:f,selectedRowKeys:i,setSelectedRowKeys:l,checked:x,rowKey:u="id",selectType:g="string",permissionKey:n}=S,[h,b]=t.useState([]),[w,d]=t.useState([]),[a,C]=t.useState(1),[o,K]=t.useState(10),[R,T]=t.useState(0),j=p(e=>e.user.token),r=p(e=>e.menuRedux.buttonPermissionsList),k=(e,s)=>{l(g==="string"?e:s)};function L(){z(0,d),E({url:y,data:{pageNum:a,pageSize:o},token:j}).then(e=>{const s=e.content.list;T(e.content.total),b(s)}).finally(()=>{P(0,d)})}return t.useEffect(()=>{L()},[a,o,f]),c.jsx(c.Fragment,{children:c.jsx(v,{loading:w[0],dataSource:h,columns:m,scroll:{x:"max-content"},rowKey:u,rowSelection:x&&(r!=null&&r.find(e=>(Array.isArray(n)?n:[n]).includes(e.perms)))?{type:"checkbox",onChange:k,selectedRowKeys:g==="string"?i:i.map(e=>e[u])}:void 0,pagination:{current:a,pageSize:o,total:R,onChange(e,s){C(e),K(s)},showSizeChanger:!0}})})}export{M};
