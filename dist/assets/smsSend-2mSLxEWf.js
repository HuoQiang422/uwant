import{r as s,c as u,j as t,f as S,g as x,T as y,S as f,B as T,e as g,p as I,h as b,t as j,l as k}from"./index-nLGxCEPz.js";import{T as w,M as _,a as i}from"./tableSearchBar-VKh_S6Ni.js";function E(){const[d,l]=s.useState(),r=u(e=>e.user.token),[o,n]=s.useState([]),[c,h]=s.useState(0),m=[{title:"session-id",width:240,dataIndex:"sessionId",key:"sessionId",fixed:"left",render:e=>e||"-"},{title:"手机号",width:160,dataIndex:"mobile",key:"mobile",render:e=>e||"-"},{title:"推送内容",width:380,dataIndex:"content",key:"content",render:e=>e||"-"},{title:"挂机时间",width:200,dataIndex:"handUpTime",key:"handUpTime",render:e=>t.jsx(i,{text:e})},{title:"短信送达结果",width:160,dataIndex:"state",key:"state",render:e=>t.jsx(y,{color:e==="已发送"?"green":"blue",children:e||"-"})},{title:"发送时间",width:200,dataIndex:"sendDate",key:"sendDate",render:e=>t.jsx(i,{text:e})},{title:"操作",fixed:"right",width:120,render:(e,a)=>t.jsx(f,{size:"middle",children:t.jsx(T,{size:"small",type:"link",loading:o[a.id],disabled:a.state==="已发送",onClick:()=>{p(a.id)},children:"发送短信"})})}];function p(e){g(e,n),I({url:b,token:r,data:j({id:e})}).then(a=>{a&&h(Math.random())}).finally(()=>{k(e,n)})}return t.jsxs(t.Fragment,{children:[t.jsx(w,{fields:[{type:"input",placeholder:"手机号",name:"mobile"},{type:"input",placeholder:"推送内容",name:"content"},{type:"select",placeholder:"状态",selectOptions:[{label:"已发送",value:"已发送"},{label:"未发送",value:"未发送"}],name:"state"}],onFinish:l,rows:1,showExport:!0,exportRequestUrl:S}),t.jsx(_,{tableKey:c,columns:m,searchParams:d,getListUrl:x})]})}export{E as default};
