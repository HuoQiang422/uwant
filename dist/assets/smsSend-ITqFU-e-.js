import{r as n,c as u,j as t,t as S,f as x,g as T,T as f,S as y,B as g,e as k,p as I,h as b,i as j,l as w}from"./index-zsbuSaJ-.js";import{u as P,T as _,M as E,a as i}from"./useFresh-vG25fycZ.js";function D(){const[r,d]=n.useState(),l=u(e=>e.user.token),[o,s]=n.useState([]),{key:m,refresh:c}=P(),h=[{title:"session-id",width:240,dataIndex:"sessionId",key:"sessionId",fixed:"left",render:e=>e||"-"},{title:"手机号",width:160,dataIndex:"mobile",key:"mobile",render:e=>e||"-"},{title:"推送内容",width:380,dataIndex:"content",key:"content",render:e=>e||"-"},{title:"挂机时间",width:200,dataIndex:"handUpTime",key:"handUpTime",render:e=>t.jsx(i,{text:e})},{title:"短信送达结果",width:160,dataIndex:"state",key:"state",render:e=>t.jsx(f,{color:e==="已发送"?"green":"blue",children:e||"-"})},{title:"发送时间",width:200,dataIndex:"sendDate",key:"sendDate",render:e=>t.jsx(i,{text:e})},{title:"操作",fixed:"right",width:120,render:(e,a)=>t.jsx(y,{size:"middle",children:t.jsx(g,{size:"small",type:"link",loading:o[a.id],disabled:a.state==="已发送",onClick:()=>{p(a.id)},children:"发送短信"})})}];function p(e){k(e,s),I({url:b,token:l,data:j({id:e})}).then(a=>{a&&c()}).finally(()=>{w(e,s)})}return t.jsxs(t.Fragment,{children:[t.jsx(_,{fields:[{type:"input",placeholder:"手机号",name:"mobile"},{type:"input",placeholder:"推送内容",name:"content"},{type:"select",placeholder:"状态",selectOptions:[{label:"已发送",value:"已发送"},{label:"未发送",value:"未发送"}],name:"state"},{type:"rangePicker",name:"date"}],onFinish:e=>{if(e.date){const a=S(e.date);e.startTime=a.startTime,e.endTime=a.endTime}delete e.date,d(e)},rows:1,showExport:!0,exportRequestUrl:x}),t.jsx(E,{dataKey:"content.records",tableKey:m,columns:h,params:{searchParams:r},getListUrl:T})]})}export{D as default};
