import{r as i,u as p,j as s,S as c,A as x,t as r,p as m,a as K,b as u,e as g,c as b,l as S}from"./index--DjN_GCZ.js";import{C as h,T as U}from"./confirm-rrV5STMe.js";import{M as _}from"./myTable-gM2PRUcz.js";import"./useIcons-jgRnfhFH.js";function A(){const[f,o]=i.useState(0),[n,a]=i.useState([]),[y,d]=i.useState([]),l=p(e=>e.user.token),T=[{title:"用户名称",width:160,dataIndex:"username",key:"username",fixed:"left",render:e=>e||"-"},{title:"是否踢出",width:100,dataIndex:"sessionStatus",key:"sessionStatus",render:e=>s.jsx(U,{color:e===!1?"green":"red",children:e===!1?"否":"是"})},{title:"主机",width:200,dataIndex:"host",key:"host",render:e=>e||"-"},{title:"session创建时间",width:200,dataIndex:"startTime",key:"startTime",render:e=>e?r(e):"-"},{title:"最后一次和系统交互的时间",width:200,dataIndex:"lastAccess",key:"lastAccess",render:e=>e?r(e):"-"},{title:"最后登录时间",width:200,dataIndex:"lastLoginTime",key:"lastLoginTime",render:e=>e?r(e):"-"},{title:"操作",width:100,fixed:"right",render:(e,t)=>s.jsx(c,{size:"middle",children:s.jsx(h,{permissionKey:"onlineUser:kickout",danger:!0,buttonText:"踢出用户",confirmTitle:"是否确认踢出",onConfirm:()=>{I(t.username,t.sessionId)}})})}];function I(e,t){m({url:K,token:l,data:u({username:e,sessionId:t})}).then(()=>{o(Math.random())}).finally(()=>{a([])})}function k(){g(0,d),m({url:b,token:l,data:u({userIds:n})}).then(e=>{e&&o(Math.random())}).finally(()=>{S(0,d),a([])})}return s.jsxs(s.Fragment,{children:[s.jsx(c,{className:"mb-3",children:s.jsx(h,{permissionKey:"onlineUser:batchKickout",disabled:n.length===0,buttonText:"批量踢出用户",buttonType:"primary",danger:!0,confirmTitle:"是否确认踢出？",size:"middle",onConfirm:k,loading:y[0]})}),s.jsx(_,{permissionKey:"onlineUser:batchKickout",selectType:"object",rowKey:"sessionId",checked:!0,columns:T,url:x,tableKey:f,selectedRowKeys:n,setSelectedRowKeys:a})]})}export{A as default};
